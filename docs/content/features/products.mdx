
# Products

Products in Hoikka support variants, translations, and facets (attributes).

## Data Model

```
Product
├── slug (unique identifier)
├── featuredAsset
├── translations (name, description per language)
├── variants (SKU, price, stock)
└── facetValues (attributes like color, size)
```

## Multi-Language Support

Products use translation tables. The `getTranslation()` helper finds the right translation with a fallback:

```typescript
import { getTranslation } from "$lib/utils";

const product = await productService.getById(123);

// Get localized name (defaults to DEFAULT_LANGUAGE)
const name = getTranslation(product.translations)?.name;

// Explicit language
const fName = getTranslation(product.translations, "fi")?.name;
```

## Variants

Each product has one or more variants:

```typescript
// Product: "T-Shirt"
// Variants: "T-Shirt - Red / M", "T-Shirt - Blue / L"

const variant = {
	sku: "TSHIRT-RED-M",
	price: 2999, // cents
	stock: 50,
	facetValues: [redColor, mediumSize]
};
```

## Facets (Attributes)

Facets define product attributes for filtering:

```typescript
// Facet: "Color"
// Values: "Red", "Blue", "Green"

// Facet: "Size"
// Values: "S", "M", "L", "XL"
```

Products and variants can have facet values assigned for:

- Filtering in collections
- Search refinement
- Variant selection

## Search

Full-text search using PostgreSQL:

```typescript
const results = await productService.list({ search: "shirt" });
```

## Admin Operations

```typescript
import { DEFAULT_LANGUAGE } from "$lib/utils";

// Create product
await productService.create({
	translations: [{ languageCode: DEFAULT_LANGUAGE, name: "Blue Shirt", slug: "blue-shirt", description: "..." }]
});

// Variant operations are handled through productService
// See src/lib/server/services/products.ts for variant management
```
